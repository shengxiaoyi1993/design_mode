# 5 行为模式

- 算法和对象职责的分配
- 控制流， 联系方式
- 行为对象模式使用组合而不是继承 相互协作/相互联系/耦合关系/依赖关系/

封装行为并指派/





## 5.1 chain of responsibility 

- 意图
  - 使多个对象有机会处理请求，避免耦合关系。将对象连成链，并沿着链传递该请求，直到有对象处理该请求
- 别名
- 动机
  - 同上
- 适用性
  - 多个对象可以处理同一请求，运行时刻自动确定
  - 不明确指定接收者时，可以向多个对象中的一个提交请求
  - 处理请求的集合应被动态指定
- 结构
  - 后继者作为接一个接收者
- 参与者
  - handler
  - concretehandler
  - client 
- 协作
  - 当客户提交一个请求时，请求沿链传递直至由一个concretehandler对象负责处理它
- 效果
  - 降低耦合度
  - 增强对象指派任务的灵活性
  - 不保证被接受
- 实现
  - 实现后继者链  
  - 连接后继者 转发给后继者 
  - 表示请求 定义请求的类型和处理方法，及请求者与处理者如何达成一致 （标示符与请求提供标示符函数）；子类可以通过重定义该函数拓展操作
- 实例
- 应用
- 相关模式

- 其他：

  - 职责链模式不由自身创建，而是由客户端进行设置
  - 一般的解决方法是边界各个层次的函数进行处理，需要修改时需要修改原代码，违反开闭原则

  

## 5.2 command 

- 意图
  - 将请求封装为对象，用不同的请求对客户进行参数化
- 别名
  - action transaction
- 动机
  - 接收者知道信息，该信息（可能是函数）是执行命令所需要的，将命令作为参数传入
  - 设计用户界面时具有很大灵活性
- 适用性
  - 抽象出待执行的行为以参数化某对象 回调函数面向对象的替代品
  - 在不同时刻指定、排列和执行请求
  - 支持取消操作
  - 支持修改日志
  - 用构建在原语基础上的高层操作构造一个系统   支持事务，易于拓展，添加新事务
- 结构
  - 支持取消操作
- 参与者
  - command 
  - concreteCommand
  - client
  - invoker
  - receiver
- 协作
  - client创建一个concreteCommand并指定他的receiver
  - invoker存储concretecommand对象
  - invoker提交请求，若命令可撤销，在执行之前
- 效果
  - 将操作对象 与 实现该操作对象向解耦   （？行为与信息分离）
  - 操作对象可与其他对象一样被操纵和拓展
  - 多个命令装配成一个复合命令
- 实现
  - 命令对象的智能程度 
  - 支持取消和操作  此时command需要记录额外的信息
  - 避免取消操作过程中的错误积累
  - 使用c++模板
- 实例
- 应用
  - 结合chain of responsibility，消费链
  - 命令的对象被计算出来，优化方法
- 相关模式
  - composite实现宏命令
  - memento 





```
- 意图
- 别名
- 动机
- 适用性
- 结构
- 参与者
- 协作
- 效果
- 实现
- 实例
- 应用
- 相关模式
```

